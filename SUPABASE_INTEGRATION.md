# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Supabase - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `@supabase/supabase-js`, `@tanstack/react-query`
- ‚úÖ –°–æ–∑–¥–∞–Ω Supabase client –≤ `src/integrations/supabase/client.ts`
- ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Ç–∏–ø—ã –ë–î –≤ `src/integrations/supabase/types.ts`
- ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã 15 –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ `supabase/migrations/`
- ‚úÖ –°–æ–∑–¥–∞–Ω `.env.local` —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Supabase

### 2. AuthContext (–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ Supabase Auth
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ email/password –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏: `login()`, `signup()`, `logout()`
- ‚ö†Ô∏è  **–í–∞–∂–Ω–æ**: –í—Ö–æ–¥ —Ç–µ–ø–µ—Ä—å –ø–æ email –≤–º–µ—Å—Ç–æ username

### 3. DataContext (–î–∞–Ω–Ω—ã–µ)
- ‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π DataContext —Å Supabase API
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è Tenders —á–µ—Ä–µ–∑ Supabase
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è Suppliers —á–µ—Ä–µ–∑ Supabase
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è Expenses —á–µ—Ä–µ–∑ Supabase
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### 4. –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö (src/lib/converters.ts)
- ‚úÖ **–†—É—Å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!**
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤: —Ä—É—Å—Å–∫–∏–π ‚Üî –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
  - –ù–æ–≤—ã–π ‚Üî accepting
  - –ü–æ–¥–∞–Ω–æ ‚Üî submitted
  - –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ ‚Üî review
  - –ü–æ–±–µ–¥–∞ ‚Üî won
  - –í —Ä–∞–±–æ—Ç–µ ‚Üî in_progress
  - –ó–∞–≤–µ—Ä—à—ë–Ω - –û–ø–ª–∞—á–µ–Ω ‚Üî completed
  - –ü—Ä–æ–∏–≥—Ä–∞–Ω ‚Üî lost
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:
  - `tenderFromDb()` - –∏–∑ –ë–î –≤ UI —Ñ–æ—Ä–º–∞—Ç
  - `tenderToDb()` - –∏–∑ UI –≤ –ë–î —Ñ–æ—Ä–º–∞—Ç
  - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è Supplier –∏ Expense

### 5. App.tsx
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω QueryClientProvider –¥–ª—è React Query
- ‚úÖ –û–±—ë—Ä–Ω—É—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

## ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ö–†–ò–¢–ò–ß–ù–û)
–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–ª–µ–π:

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Tender:**
- `name` ‚Üí `title`
- `url` ‚Üí `link`
- `publicationDate` ‚Üí `publish_date`
- `submissionDeadline` ‚Üí `deadline`
- `initialPrice` ‚Üí `amount`
- `contractSecurityPercent` ‚Üí `contract_guarantee_percent`

**–§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- `src/components/AddTenderDialog.tsx` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—è —Ñ–æ—Ä–º—ã
- `src/components/Layout.tsx` - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- `src/pages/TendersPage.tsx` - –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `src/pages/AccountingPage.tsx` - –æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç—ã
- –í—Å–µ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ Tender

### 2. LoginPage (–í–ê–ñ–ù–û)
- ‚ö†Ô∏è  –û–±–Ω–æ–≤–∏—Ç—å LoginPage –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å email –≤–º–µ—Å—Ç–æ username
- –¢–µ–∫—É—â–∏–π —Ñ–∞–π–ª: `src/pages/LoginPage.tsx`
- –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å label "–õ–æ–≥–∏–Ω" –Ω–∞ "Email"
- –ò–∑–º–µ–Ω–∏—Ç—å placeholder "–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" –Ω–∞ "–í–≤–µ–¥–∏—Ç–µ email"

### 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üî¥ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (SignupPage)
- üî¥ –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ LoginPage
- üî¥ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `signup()` –∏–∑ AuthContext

### 4. TypeScript –æ—à–∏–±–∫–∏
- ‚ö†Ô∏è  ~50+ –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –ü—Ä–∏—á–∏–Ω–∞: —Å—Ç–∞—Ä—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π (name, url –∏ —Ç.–¥.)
- –†–µ—à–µ–Ω–∏–µ: –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø.1

### 5. Suppliers –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä
- ‚ö†Ô∏è  –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ `src/lib/converters.ts`
- –ü—Ä–æ–±–ª–µ–º–∞: –ø–æ–ª—è –∏–∑ –ë–î –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å—Ö–µ–º—É suppliers –≤ Supabase

## üìã –ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Supabase
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard: https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: pfxzcky...
3. Authentication ‚Üí Users ‚Üí Add User
4. Email: admin@crm.ru
5. Password: admin123
6. Auto-confirm: –¥–∞
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å LoginPage
```typescript
// src/pages/LoginPage.tsx
// –ò–∑–º–µ–Ω–∏—Ç—å:
- <Label htmlFor="username">–õ–æ–≥–∏–Ω</Label>
- <Input id="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" ...>

// –ù–∞:
+ <Label htmlFor="email">Email</Label>
+ <Input id="email" type="email" placeholder="–í–≤–µ–¥–∏—Ç–µ email" ...>
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å AddTenderDialog
–ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π –Ω–∞ –Ω–æ–≤—ã–µ —Å–æ–≥–ª–∞—Å–Ω–æ –º–∞–ø–ø–∏–Ω–≥—É –≤—ã—à–µ.

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å TendersPage –∏ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

### –®–∞–≥ 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
```bash
npm run dev
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# - –í—Ö–æ–¥ —á–µ—Ä–µ–∑ admin@crm.ru / admin123
# - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞
# - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞
# - –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞
```

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã

### –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (–ø—Ä–∏–º–µ—Ä):
```typescript
import { statusFromDb, statusToDb } from '../lib/converters';

// –ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î:
const russianStatus = statusFromDb(dbTender.status);

// –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î:
const englishStatus = statusToDb('–ù–æ–≤—ã–π'); // 'accepting'
```

### DataContext —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
–í–∞–º –ù–ï –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö - DataContext –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∑–∞ –≤–∞—Å.

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã Supabase:
- **tenders** - —Ç–µ–Ω–¥–µ—Ä—ã
- **suppliers** - –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏
- **expenses** - —Ä–∞—Å—Ö–æ–¥—ã –ø–æ —Ç–µ–Ω–¥–µ—Ä–∞–º
- **incomes** - –¥–æ—Ö–æ–¥—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### Enum —Å—Ç–∞—Ç—É—Å–æ–≤ (tender_status):
- accepting (–ù–æ–≤—ã–π)
- submitted (–ü–æ–¥–∞–Ω–æ)
- review (–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ)
- won (–ü–æ–±–µ–¥–∞)
- in_progress (–í —Ä–∞–±–æ—Ç–µ)
- completed (–ó–∞–≤–µ—Ä—à—ë–Ω - –û–ø–ª–∞—á–µ–Ω)
- lost (–ü—Ä–æ–∏–≥—Ä–∞–Ω)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS)
Supabase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RLS - –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `.env.local` - –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—É–∂–µ —Å–æ–∑–¥–∞–Ω)
- ‚úÖ `.env.example` - —à–∞–±–ª–æ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚ö†Ô∏è  `.env.local` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` - –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Git

## üìù –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –†–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (email/password)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (—Ä—É—Å—Å–∫–∏–π ‚Üî –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)

### –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤):
- üî¥ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞—Ä—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π
- üî¥ TypeScript –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- üî¥ LoginPage –æ–∂–∏–¥–∞–µ—Ç username –≤–º–µ—Å—Ç–æ email

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—é

1. **–ù–∞—á–Ω–∏—Ç–µ —Å LoginPage** - —ç—Ç–æ —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Supabase** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
3. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ** - –æ–¥–∏–Ω –∑–∞ —Ä–∞–∑
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ** - –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeScript –æ—à–∏–±–∫–∏** - –∫–∞–∫ —Å–ø–∏—Å–æ–∫ TODO

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —Å–µ–∞–Ω—Å

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å:
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Supabase Dashboard
2. –û–±–Ω–æ–≤–∏—Ç–µ LoginPage –¥–ª—è email
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev`
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: –µ—â–µ ~2-3 —á–∞—Å–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
