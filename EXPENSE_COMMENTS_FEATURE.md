# ✅ Добавлены комментарии к расходам

## Что добавлено

В детализацию расходов добавлено поле **"Комментарий"** для каждого расхода.

## 🎯 Новая функциональность

### Теперь можно добавлять:
1. **Название расхода** (обязательно)
2. **Сумма** (обязательно)
3. **Комментарий** (необязательно)

## 📝 Как использовать

### Добавление расхода с комментарием:

1. Откройте вкладку **"Бухгалтерия"**
2. Раскройте нужный тендер
3. В секции "Детализация расходов" заполните форму:
   - **Первая строка:**
     - Название расхода (например, "Материалы")
     - Сумма (например, "50000")
   - **Вторая строка:**
     - Комментарий (например, "Закупка стройматериалов у ООО Стройком")
4. Нажмите **"Добавить"**

### Отображение расхода:

```
┌─────────────────────────────────────────┐
│ Материалы                    -50 000 ₽ [×]│
│ Закупка стройматериалов у ООО Стройком   │
└─────────────────────────────────────────┘
```

- **Первая строка:** Название и сумма
- **Вторая строка:** Комментарий (серым цветом, мелким шрифтом)
- Если комментария нет - вторая строка не отображается

## 🎨 Дизайн

### Форма добавления:

**Строка 1:**
```
[Название расхода................] [Сумма..]
```

**Строка 2:**
```
[Комментарий (необязательно)..............] [Добавить]
```

### Карточка расхода:

**С комментарием:**
```
┌────────────────────────────────────┐
│ Название расхода        -1000 ₽ [×]│
│ Текст комментария                  │
└────────────────────────────────────┘
```

**Без комментария:**
```
┌────────────────────────────────────┐
│ Название расхода        -1000 ₽ [×]│
└────────────────────────────────────┘
```

## 💾 Структура данных

### Обновленный тип Expense:

```typescript
export interface Expense {
  id: string;
  name: string;
  amount: number;
  comment?: string;  // ← Новое поле
}
```

### Пример данных:

```json
{
  "id": "1697123456789",
  "name": "Материалы",
  "amount": 50000,
  "comment": "Закупка стройматериалов у ООО Стройком"
}
```

## 🔧 Технические детали

### Изменения в файлах:

1. **`src/types/index.ts`**
   - Добавлено поле `comment?: string` в интерфейс `Expense`

2. **`src/pages/AccountingPage.tsx`**
   - Обновлен тип `newExpense` для включения комментария
   - Обновлена функция `addExpense` для сохранения комментария
   - Обновлена функция `handleExpenseChange` для обработки комментария
   - Обновлен UI для отображения комментария
   - Добавлено поле ввода комментария в форму

### Код отображения комментария:

```typescript
<div className="flex items-center justify-between">
  <div className="flex-1">
    <div className="text-sm font-medium">{expense.name}</div>
    {expense.comment && (
      <div className="text-xs text-gray-500 mt-0.5">
        {expense.comment}
      </div>
    )}
  </div>
  <div className="flex items-center gap-2">
    <span className="text-sm font-semibold text-red-600">
      -{formatCurrency(expense.amount)}
    </span>
    <Button onClick={() => removeExpense(tender.id, expense.id)}>
      <Trash2 className="h-3 w-3 text-red-500" />
    </Button>
  </div>
</div>
```

## 📊 Примеры использования

### Пример 1: Материалы
- **Название:** Материалы
- **Сумма:** 50 000 ₽
- **Комментарий:** Закупка стройматериалов у ООО Стройком, накладная №123

### Пример 2: Транспорт
- **Название:** Транспортные расходы
- **Сумма:** 15 000 ₽
- **Комментарий:** Доставка материалов на объект, 3 рейса

### Пример 3: Зарплата
- **Название:** Зарплата рабочих
- **Сумма:** 120 000 ₽
- **Комментарий:** Оплата труда бригады за сентябрь 2024

### Пример 4: Без комментария
- **Название:** Прочие расходы
- **Сумма:** 5 000 ₽
- **Комментарий:** *(не указан)*

## ✅ Преимущества

1. **Детализация** - можно указать подробности о каждом расходе
2. **Прозрачность** - понятно, на что потрачены деньги
3. **Документирование** - можно указать номера накладных, договоров
4. **Необязательность** - комментарий можно не заполнять
5. **Компактность** - комментарий не занимает много места

## 🎯 Когда использовать комментарии

### Рекомендуется добавлять комментарий:
- ✅ Для крупных расходов (>50 000 ₽)
- ✅ Для нестандартных расходов
- ✅ Когда нужно указать поставщика
- ✅ Когда нужно указать номер документа
- ✅ Для уточнения деталей

### Можно не добавлять:
- ⭕ Для мелких расходов
- ⭕ Когда название полностью описывает расход
- ⭕ Для типовых расходов

## 🔍 Проверка работы

1. Откройте **"Бухгалтерия"**
2. Выберите любой тендер
3. Добавьте расход:
   - Название: "Тестовый расход"
   - Сумма: "1000"
   - Комментарий: "Это тестовый комментарий"
4. Нажмите **"Добавить"**
5. **Проверьте:**
   - ✅ Расход добавлен
   - ✅ Комментарий отображается под названием
   - ✅ Комментарий серого цвета и мелким шрифтом
6. Добавьте расход без комментария:
   - Название: "Расход без комментария"
   - Сумма: "500"
   - Комментарий: *(оставьте пустым)*
7. **Проверьте:**
   - ✅ Расход добавлен
   - ✅ Вторая строка не отображается

## 💡 Советы

1. **Будьте конкретны** - указывайте конкретные детали
2. **Указывайте документы** - номера накладных, счетов
3. **Указывайте поставщиков** - для отслеживания
4. **Используйте даты** - когда это важно
5. **Не дублируйте** - не повторяйте название в комментарии

## ✅ Готово!

Теперь вы можете добавлять подробные комментарии к каждому расходу для лучшей детализации и прозрачности учета! 🎉

**Приятной работы! 📊**
